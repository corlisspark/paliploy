import{u as k,r as i,j as s,c as f,Q as y}from"./useAuth-g5JMFC9x.js";/* empty css               */import{c as o,P as d,U as P}from"./user-DSFq6umH.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],b=o("log-out",w);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],A=o("star",S);function E(){const{user:e,userProfile:l,signOut:h}=k(),[n,u]=i.useState({totalPacks:0,activePacks:0,totalViews:0,avgRating:0}),[r,m]=i.useState([]),[x,j]=i.useState(!0);i.useEffect(()=>{e&&v()},[e]);const v=async()=>{try{const p=await window.db.collection("posts").where("userId","==",e?.uid).orderBy("created","desc").get(),c=[];p.forEach(t=>{c.push({id:t.id,...t.data()})}),m(c),u({totalPacks:c.length,activePacks:c.filter(t=>t.status!=="rejected").length,totalViews:c.reduce((t,g)=>t+(g.views||0),0),avgRating:4.5})}catch(a){console.error("Error loading user data:",a)}finally{j(!1)}},N=async()=>{confirm("Are you sure you want to sign out?")&&await h()};return e?x?s.jsx("div",{className:"loading-state",children:"Loading account..."}):s.jsxs("div",{className:"account-dashboard",children:[s.jsxs("div",{className:"account-header",children:[s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-avatar",children:l?.displayName?.charAt(0)?.toUpperCase()||e.email.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h1",{children:l?.displayName||"User"}),s.jsx("p",{children:e.email}),l?.role==="admin"&&s.jsx("span",{className:"admin-badge",children:"ðŸ‘‘ Admin"})]})]}),s.jsxs("button",{className:"sign-out-btn",onClick:N,children:[s.jsx(b,{size:16}),"Sign Out"]})]}),s.jsxs("div",{className:"account-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx(d,{className:"stat-icon"}),s.jsx("div",{className:"stat-value",children:n.totalPacks}),s.jsx("div",{className:"stat-label",children:"Total Packs"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx(d,{className:"stat-icon"}),s.jsx("div",{className:"stat-value",children:n.activePacks}),s.jsx("div",{className:"stat-label",children:"Active Packs"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx(P,{className:"stat-icon"}),s.jsx("div",{className:"stat-value",children:n.totalViews}),s.jsx("div",{className:"stat-label",children:"Total Views"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx(A,{className:"stat-icon"}),s.jsx("div",{className:"stat-value",children:n.avgRating.toFixed(1)}),s.jsx("div",{className:"stat-label",children:"Avg Rating"})]})]}),s.jsx("div",{className:"account-content",children:s.jsxs("div",{className:"section",children:[s.jsx("h3",{children:"Your Packs"}),r.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"You haven't posted any packs yet."}),s.jsx("a",{href:"new.html",className:"cta-btn",children:"Post Your First Pack"})]}):s.jsx("div",{className:"user-packs",children:r.map(a=>s.jsxs("div",{className:"pack-item",children:[s.jsxs("div",{className:"pack-info",children:[s.jsx("h4",{children:a.title}),s.jsxs("p",{children:["$",a.price," â€¢ ",a.city?.replace(/-/g," ")]})]}),s.jsx("div",{className:"pack-status",children:s.jsx("span",{className:`status ${a.status||"approved"}`,children:a.status||"approved"})})]},a.id))})]})})]}):s.jsxs("div",{className:"account-not-authenticated",children:[s.jsx("h2",{children:"Please sign in to view your account"}),s.jsx("button",{onClick:()=>window.authManager?.showSignInModal(),children:"Sign In"})]})}function U(){return s.jsx(E,{})}f.createRoot(document.getElementById("root")).render(s.jsx(i.StrictMode,{children:s.jsx(y,{children:s.jsx(U,{})})}));
