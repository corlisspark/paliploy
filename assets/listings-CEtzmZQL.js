import{r as i,j as e,c as f,Q as y}from"./useAuth-g5JMFC9x.js";/* empty css               */import{a as b,H as k}from"./Header-COD7X1WY.js";import{V as C}from"./VendorModal-BH7wcwAH.js";function S(){const{data:s=[],isLoading:u,error:o}=b(),[c,l]=i.useState(""),[t,x]=i.useState(null),d={providence:{lat:41.824,lng:-71.4128},woonsocket:{lat:42.0029,lng:-71.5153},newport:{lat:41.4901,lng:-71.3128},"southcoast-ma":{lat:41.6362,lng:-70.9342},boston:{lat:42.3601,lng:-71.0589},cambridge:{lat:42.3736,lng:-71.1097},worcester:{lat:42.2626,lng:-71.8023},"north-shore-ma":{lat:42.5584,lng:-70.8648}},n=i.useMemo(()=>s.map(r=>{const a=d[r.city]||d.providence,m=.01,p=a.lat+(Math.random()-.5)*m,N=a.lng+(Math.random()-.5)*m;let j=r.vendor;return j.toLowerCase().includes("sprinklez")&&(j="Bozo Headstash"),{...r,vendor:j.toLowerCase().replace(/\s+/g,"-"),vendorDisplay:j,lat:p,lng:N,rating:Math.random()*2+3,inStock:Math.random()>.3,verified:Math.random()>.5}}),[s]),v=i.useMemo(()=>{let r=n;if(t&&(r=r.filter(a=>a.city===t),r.length===0&&(r=n)),c.trim()){const a=c.toLowerCase();r=r.filter(m=>m.title.toLowerCase().includes(a)||m.vendor.toLowerCase().includes(a)||m.city.toLowerCase().includes(a))}return r},[n,c,t]),g=r=>{x(r)},h=r=>{l(r)};return{vendors:n,filteredVendors:v,loading:u,error:o?.message||null,filterByCity:g,searchVendors:h,refetch:()=>{}}}function w({vendor:s,onClick:u}){const[o,c]=i.useState(!1),l={"bozo-headstash":{color:"#8e44ad",icon:"B"},gumbo:{color:"#e74c3c",icon:"G"},"deep-fried":{color:"#f39c12",icon:"D"},"high-tolerance":{color:"#3498db",icon:"H"},other:{color:"#95a5a6",icon:"O"}},t=l[s.vendor]||l.other,x=s.inStock?"in-stock":"low-stock",d=s.inStock?"âœ“ In Stock":"âš  Low Stock",n=s.city.replace(/-/g," ").replace(/\b\w/g,v=>v.toUpperCase());return e.jsxs("div",{className:"vendor-card",onClick:()=>u(s),children:[s.images&&s.images.length>0&&!o&&e.jsxs("div",{className:"vendor-card-images",children:[e.jsx("img",{src:s.images[0],alt:s.title,className:"vendor-main-image",onError:()=>c(!0)}),s.images.length>1&&e.jsxs("div",{className:"image-count",children:["+",s.images.length-1]})]}),e.jsxs("div",{className:"vendor-card-header",children:[e.jsx("div",{className:`vendor-avatar ${s.vendor}`,style:{background:t.color},children:t.icon}),e.jsxs("div",{className:"vendor-info",children:[e.jsx("h3",{children:s.vendorDisplay}),e.jsxs("div",{className:"vendor-location",children:["ğŸ“ ",n]})]})]}),e.jsxs("div",{className:"vendor-card-body",children:[e.jsx("div",{className:"vendor-title",children:s.title}),e.jsx("div",{className:"vendor-description",children:s.description||"Premium quality product"})]}),e.jsxs("div",{className:"vendor-card-footer",children:[e.jsxs("div",{className:"vendor-price",children:["$",s.price]}),e.jsxs("div",{className:"vendor-meta",children:[e.jsxs("div",{className:"vendor-rating",children:["â­ ",s.rating.toFixed(1)]}),e.jsx("div",{className:`vendor-status ${x}`,children:d}),s.verified&&e.jsx("div",{className:"vendor-status verified",children:"âœ“ Verified"})]})]})]})}function V(){const{filteredVendors:s,loading:u,error:o,searchVendors:c}=S(),[l,t]=i.useState(null),[x,d]=i.useState(""),[n,v]=i.useState("all"),g=a=>{d(a),c(a)},h=a=>{v(a)},r=s.filter(a=>n==="all"?!0:a.vendor===n);return u?e.jsx("div",{className:"listings-container",children:e.jsx("div",{className:"loading-state",children:"Loading packs..."})}):o?e.jsx("div",{className:"listings-container",children:e.jsxs("div",{className:"error-state",children:["Error: ",o]})}):e.jsxs("div",{className:"listings-container",children:[e.jsxs("div",{className:"listings-header",children:[e.jsx("h1",{className:"listings-title",children:"Browse Packs"}),e.jsxs("p",{className:"listings-subtitle",children:[r.length," packs available"]})]}),e.jsxs("div",{className:"search-filters",children:[e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",className:"search-input",placeholder:"Search nearby vendors and strains",value:x,onChange:a=>g(a.target.value)})}),e.jsxs("div",{className:"filter-pills",children:[e.jsx("button",{className:`filter-pill ${n==="all"?"active":""}`,onClick:()=>h("all"),children:"All"}),e.jsx("button",{className:`filter-pill ${n==="bozo-headstash"?"active":""}`,onClick:()=>h("bozo-headstash"),children:"Bozo Headstash"}),e.jsx("button",{className:`filter-pill ${n==="gumbo"?"active":""}`,onClick:()=>h("gumbo"),children:"Gumbo"}),e.jsx("button",{className:`filter-pill ${n==="deep-fried"?"active":""}`,onClick:()=>h("deep-fried"),children:"Deep Fried"})]})]}),e.jsx("div",{className:"vendor-grid",children:r.length===0?e.jsx("div",{className:"no-results",children:e.jsx("p",{children:"No packs found matching your search."})}):r.map(a=>e.jsx(w,{vendor:a,onClick:t},a.id))}),e.jsx(C,{vendor:l,isOpen:!!l,onClose:()=>t(null)})]})}function L(){return e.jsxs("div",{className:"app-container",children:[e.jsx(k,{currentPage:"listings"}),e.jsx("main",{className:"main-content",children:e.jsx(V,{})}),e.jsx("div",{className:"bottom-toolbar",children:e.jsxs("nav",{className:"toolbar-nav",children:[e.jsxs("a",{href:"index.html",className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ—ºï¸"}),e.jsx("span",{children:"Map"})]}),e.jsxs("a",{href:"listings.html",className:"nav-item active",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“‹"}),e.jsx("span",{children:"Browse"})]}),e.jsxs("a",{href:"new.html",className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"â•"}),e.jsx("span",{children:"Post"})]}),e.jsxs("a",{href:"account.html",className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ‘¤"}),e.jsx("span",{children:"Account"})]})]})})]})}f.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(y,{children:e.jsx(L,{})})}));
